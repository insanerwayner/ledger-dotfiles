#!/bin/sh
case "${1#[-+]}" in
    "" ) depth=0
        ;;
    *[!0-9]*  )
        echo "\"$1\" is not a valid integer" 1>&2
        exit 1
        ;;
    * ) depth=$1
        ;;
esac

if [ $(( $(date +%W) % 2 )) -eq 0 ]
then
    payday=$(date -d "Friday + 1 week" +%F)
elif [ "$(date +%A)" = "Friday" ]
then
    depth=$(echo "$depth+1" | bc)
    payday=$(date +%F)
else
    payday=$(date -d "Friday" +%F)
fi

if [ "$depth" != 0 ]
then
    depth=$(echo "$depth*2" | bc)
    payday=$(date -d "$payday +$depth weeks" +%F)
fi
echo "$payday"
