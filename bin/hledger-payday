#!/bin/bash
case "${1#[-+]}" in
    "" ) depth=0
        ;;
    *[!0-9]*  )
        echo "\"$1\" is not a valid integer" 1>&2
        exit 1
        ;;
    * ) depth=$1
        ;;
esac

if [ $(( $(date +%-U) % 2 )) -eq 1 ]
then
    if [ "$(date +%w)" -ge 5  ]
    then
        payday=$(date -d "next Friday + 1 week" +%F)
    else
        payday=$(date -d "Friday" +%F)
    fi
else
    payday=$(date -d "Friday" +%F)
fi

if [ "$depth" != 0 ]
then
    depth=$(echo "$depth*2" | bc)
    payday=$(date -d "$payday +$depth weeks" +%F)
fi
echo "$payday"
