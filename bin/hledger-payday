#!/bin/sh
case "$1" in
    "" ) depth=0
        ;;
    * ) depth=$1
        ;;
esac

if [ $(( $(date +%W) % 2 )) -eq 0 ]
then
    payday=$(date -d "Friday + 1 week" +%Y-%m-%d)
elif [ "$(date +%A)" = "Friday" ]
then
    depth=$(echo "$depth+1" | bc)
    payday=$(date +%Y-%m-%d)
else
    payday=$(date -d "Friday" +%Y-%m-%d)
fi

if [ "$depth" = 0 ]
then
    echo "$payday"
else
    depth=$(echo "$depth*2" | bc)
    payday=$(date -d "$payday +$depth weeks" +%Y-%m-%d)
    echo "$payday"
fi
